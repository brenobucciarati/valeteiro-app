{% extends "base.html" %}

{% block title %}Programa√ß√£o Di√°ria{% endblock %}

{% block content %}
<h2 class="mt-4">Programa√ß√£o de {{ data }} ‚Äî Frota {{ tipo }}</h2>

<!-- Alerta de risco alto -->
{% if veiculos_risco_alto %}
<div class="alert alert-danger mt-3" role="alert">
    <strong>‚ö† Aten√ß√£o:</strong> Os ve√≠culos com risco <b>ALTO</b> neste m√™s s√£o:
    <span class="fw-bold">{{ veiculos_risco_alto | join(', ') }}</span>.
    <br>Considere refor√ßar a vistoria/revis√£o desses ve√≠culos.
</div>
{% endif %}

<!-- Alerta se ve√≠culo buscado n√£o for encontrado -->
{% if busca_frota and not veiculo_encontrado %}
<div class="alert alert-warning mt-3" role="alert">
    Ve√≠culo n√∫mero <strong>{{ busca_frota }}</strong> n√£o encontrado na programa√ß√£o de hoje.
</div>
{% endif %}

<!-- Formul√°rio de busca -->
<form method="get" class="row g-2 align-items-center mb-4 mt-3">
    <div class="col-auto">
        <label for="frota" class="col-form-label">Buscar ve√≠culo:</label>
    </div>
    <div class="col-auto">
        <input type="text" name="frota" id="frota" class="form-control" placeholder="Ex: 1443" value="{{ busca_frota }}">
    </div>
    <div class="col-auto">
        <button type="submit" class="btn btn-primary">üîç Buscar</button>
    </div>
</form>

<!-- Lista de ve√≠culos -->
<ul class="list-group mt-3">
    {% for veiculo in veiculos %}
        <li class="list-group-item d-flex justify-content-between align-items-center 
            {% if veiculo.id == veiculo_encontrado %}
                bg-primary text-white fw-bold
            {% else %}
                bg-dark text-white
            {% endif %}">
            Ve√≠culo {{ veiculo.numero_frota }} ({{ veiculo.tipo_frota }})
            {% if veiculo.id in remarcados_ids %}
                <span class="badge bg-danger">REMARCADO</span>
            {% endif %}
        </li>
    {% endfor %}
</ul>

<!-- Bot√£o PDF -->
<div class="mt-4">
    <a href="/gerar_pdf" class="btn btn-warning fw-bold text-dark">üìÑ Gerar Capa em PDF</a>
</div>

{% endblock %}
