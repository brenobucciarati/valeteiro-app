
{% extends "base.html" %}

{% block title %}Ranking de Risco{% endblock %}

{% block content %}
<h2 class="mt-4">Ranking de Risco - {{ mes }}/{{ ano }}</h2>

<!-- Formul√°rio de filtro -->
<form method="get" class="row g-2 align-items-center mb-4">
    <div class="col-auto">
        <label for="frota" class="col-form-label">Buscar ve√≠culo:</label>
    </div>
    <div class="col-auto">
        <input type="text" name="frota" id="frota" class="form-control" placeholder="Ex: 1443" value="{{ frota }}">
    </div>
    <div class="col-auto">
        <button type="submit" class="btn btn-primary">üîç Buscar</button>
    </div>
</form>

<!-- Tabela de risco -->
<!-- Tabela de risco -->
<table class="table table-bordered table-hover mt-4">
    <thead class="table-warning text-danger">
        <tr>
            <th>Ve√≠culo</th>
            <th>Faltas</th>
            <th>Vistoriado</th>
            <th>Apontamentos</th>
            <th>N√≠vel de Risco</th>
            <th>√öltimo Motivo</th>
        </tr>
    </thead>
    <tbody>
    {% for r in riscos %}
        <tr class="{% if r.nivel == 'ALTO' %}table-danger{% elif r.nivel == 'M√âDIO' %}table-warning{% else %}table-success{% endif %}">
            <td>
                <a href="/veiculo/{{ r.numero }}" class="text-dark fw-bold text-decoration-none bg-white px-2 py-1 rounded">
                    {{ r.numero }}
                </a>
            </td>
            <td>{{ r.faltas }}</td>
            <td>{{ r.vistoriados }}</td>
            <td>{{ r.apontamentos }}</td>
            <td>
                <strong class="{% if r.nivel == 'ALTO' %}text-danger
                                {% elif r.nivel == 'M√âDIO' %}text-warning
                                {% else %}text-success{% endif %}">
                    {{ r.nivel }}
                </strong>
            </td>
            <td>{{ r.ultimo_motivo or "‚Äî" }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}



